<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title> Registration form </title>
    <meta name="description" content="India's first OPD Health Care Plan" />
    <link rel="stylesheet" type="text/css" href="https://www.healthassure.in/plans/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://www.healthassure.in/plans/css/style1.css">
    <style>
        body{
            background-color: transparent;
        }
        @media only screen and (max-width: 300px) {
            .card1 {
                width: 85%;
                border: none;
                height: 350px;
                box-shadow: 0px 5px 20px 0px #6F1667;
                background-color: white;
                z-index: 1;
                margin: auto;
            }
        }

        @media only screen and (min-width: 301px) {
            .card1 {
                width: 90%;
                border: none;
                height: 350px;
                box-shadow: 0px 5px 20px 0px #6F1667;
                background-color: white;
                z-index: 1;
                margin: auto;
            }
        }

        @media only screen and (min-width: 601px) {
            .card1 {
                width: 90%;
                border: none;
                height: 320px;
                box-shadow: 0px 5px 20px 0px #6F1667;
                background-color: white;
                z-index: 1;
                margin: auto;
            }
        }

        @media only screen and (min-width: 900px) {
            .card1 {
                width: 95%;
                border: none;
                height: 330px;
                box-shadow: 0px 5px 20px 0px #6F1667;
                background-color: white;
                z-index: 1;
                margin: auto;
            }
        }

        .card1 h6 {
            color: #6F1667;
            font-size: 23px;
            font-weight: 600;
        }

        .card h6 {
            color: #6F1667;
            font-size: 27px;
        }

        .inputs input {
            width: 40px;
            height: 40px;
            float: left;
            border-radius: 5px;
            margin-left: 2px;
            margin-right: 2px;
        }

        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            margin: 0;
        }

        .heightwidth1 {
            width: 40% !important;
            margin-left: 30% !important;
            margin-right: 30% !important;
        }

        .form-control:focus {
            box-shadow: none;
            border: 2px solid #808080;
        }

        .validate {
            border-radius: 20px;
            height: 40px;
            background-color: green;
            border: 1px solid green;
            width: 35%;
            align-content: center;
            padding: 8px 10px !important;
        }

        .content a {
            color: #D64F4F;
            transition: all 0.5s
        }

        .content a:hover {
            color: #6F1667;
        }

        .otpboxspace {

            justify-content: center;
        }

        .form-control121 {
            width: 100%;
            padding: 10px 10px;
            height: 48px;
            background-color: #f7f7ff;
            border: 1px solid rgba(136, 158, 168, 0.2);
            font-size: 14px;
        }

        .accordion {
            background-color: #fff;
            color: #444;
            cursor: pointer;
            padding: 10px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
            transition: 0.4s;
        }

        .active,
        .accordion:hover {
            background-color: #f4f4f4;
        }

        .accordion:after {
            content: '\002B';
            color: #777;
            font-weight: bold;
            float: right;
            margin-left: 5px;
        }

        .panel {
            padding: 0px 0px;
            background-color: #e6f3fa;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            margin-bottom: 2px;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="modal-dialog" id="RegistrationModaldiv">
            <div class="modal-content" style="background-color:#e6f3fa;">
                <div class="modal-header">
                    <h5 class="modal-title" id="RegistrationModalLabel" style="font-size:20px;font-weight:600;">
                        Please enter your details...
                    </h5>
                    <button type="button" class="close" onclick="closemodalcallback()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="RegistrationformId" action="">
                        <div class="form-group">
                            <label for="exampleInputEmail1">First Name</label>
                            <input type="text" id="firstname" class="form-control" placeholder="First Name"
                                autocomplete="off" required>
                        </div>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Last Name</label>
                            <input type="text" autocomplete="off" id="lastname" class="form-control"
                                placeholder="Last Name" required>
                        </div>
                        <div class="form-group">
                            <label for="Gender">Gender</label>
                            <select class="form-select form-control" id="Gender">
                                <option value="male"> Male</option>
                                <option value="female"> Female</option>
                                <option value="other"> Other </option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Mobile No</label>
                            <input type="text" autocomplete="off" id="mobileno" class="form-control"
                                placeholder="Mobile No" maxlength="10" pattern="[0-9]{10}" required>
                        </div>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Email</label>
                            <input type="email" autocomplete="off" id="emailid" class="form-control" placeholder="Email"
                                required>
                        </div>
                        <div class="form-group">
                            <label for="exampleInputEmail1">DOB</label>
                            <input type="date" autocomplete="off" id="CustomerDob" class="form-control" max="2005-07-13"
                                min="1957-07-13" placeholder="DOB" required>
                        </div>
                        <div class="addmembermodal" id="Membersdiv" style="display: none;">
                            <button class="accordion" type="button" style="margin-top:20px;"> Member1 </button>
                            <div class="panel">
                                <div class="form-group">
                                    <label class="form-label pl-2px" for="CustomerName">Name</label>
                                    <input type="text" id="MemberName1" class="form-control" placeholder="Name *"
                                        title="Please Enter Character Only" pattern="[a-zA-Z ]*" />
                                </div>

                                <div class="form-group">
                                    <label class="form-label pl-2px" for="CustomerDOB">DOB</label>
                                    <input type="date" id="MemberDOB1" class="form-control" placeholder="DOB"
                                        min="1920-01-01" />
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Relation</label>
                                    <select id="Relative1" name="Relative1" class="form-control">
                                        <option value="SON">SON</option>
                                        <option value="DAUGHTER">DAUGHTER</option>
                                        <option value="HUSBAND">HUSBAND</option>
                                        <option value="WIFE">WIFE</option>
                                        <option value="FATHER">FATHER</option>
                                        <option value="MOTHER">MOTHER</option>
                                        <option value="FATHER-IN-LAW">FATHER-IN-LAW</option>
                                        <option value="MOTHER-IN-LAW">MOTHER-IN-LAW</option>
                                        <option value="OTHER">OTHER</option>
                                        <option value="SIBLING">SIBLING</option>
                                    </select>
                                </div>
                                <div class="form-check">
                                    <label class="form-label pl-1" for="CustomerDOB">Gender</label><br />
                                    <input style="margin-left: 5px;" class="form-check-input" type="radio"
                                        name="MemberGender1" id="MemberGender1" checked="checked" value="Male">
                                    <label style="margin-left: 30px;" for="MemberGender1">Male</label>
                                    <input style="margin-left: 20px;" class="form-check-input" type="radio"
                                        name="MemberGender1" id="MemberGender1" value="Female">
                                    <label style="margin-left: 50px;" for="MemberGender1">Female</label>
                                </div>
                            </div>
                            <button type="button" type="button" class="accordion">Member2</button>
                            <div class="panel">
                                <div class="form-group">
                                    <label class="form-label pl-2px" for="CustomerName">Name</label>
                                    <input type="text" id="MemberName2" class="form-control" placeholder="Name *"
                                        title="Please Enter Character Only" pattern="[a-zA-Z ]*" />
                                </div>

                                <div class="form-group">
                                    <label class="form-label pl-2px" for="CustomerDOB">DOB</label>
                                    <input type="date" id="MemberDOB2" class="form-control" placeholder="DOB"
                                        min="1920-01-01" />
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Relation</label>
                                    <select id="Relative2" name="Relative2" class="form-control">
                                        <option value="SON">SON</option>
                                        <option value="DAUGHTER">DAUGHTER</option>
                                        <option value="HUSBAND">HUSBAND</option>
                                        <option value="WIFE">WIFE</option>
                                        <option value="FATHER">FATHER</option>
                                        <option value="MOTHER">MOTHER</option>
                                        <option value="FATHER-IN-LAW">FATHER-IN-LAW</option>
                                        <option value="MOTHER-IN-LAW">MOTHER-IN-LAW</option>
                                        <option value="OTHER">OTHER</option>
                                        <option value="SIBLING">SIBLING</option>
                                    </select>
                                </div>
                                <div class="form-check">
                                    <label class="form-label pl-1" for="CustomerDOB">Gender</label><br />
                                    <input style="margin-left: 5px;" class="form-check-input" type="radio"
                                        name="MemberGender2" id="MemberGender2" checked="checked" value="Male">
                                    <label style="margin-left: 30px;" for="MemberGender2">Male</label>
                                    <input style="margin-left: 20px;" class="form-check-input" type="radio"
                                        name="MemberGender2" id="MemberGender2" value="Female">
                                    <label style="margin-left: 50px;" for="MemberGender2">Female</label>
                                </div>
                            </div>

                            <button type="button" type="button" class="accordion"> Member3 </button>
                            <div class="panel">
                                <div class="form-group">
                                    <label class="form-label pl-2px" for="CustomerName">Name</label>
                                    <input type="text" id="MemberName3" class="form-control" placeholder="Name *"
                                        title="Please Enter Character Only" pattern="[a-zA-Z ]*" />
                                </div>

                                <div class="form-group">
                                    <label class="form-label pl-2px" for="CustomerDOB">DOB</label>
                                    <input type="date" id="MemberDOB3" class="form-control" placeholder="DOB"
                                        min="1920-01-01" />
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Relation</label>
                                    <select id="Relative3" name="Relative3" class="form-control">
                                        <option value="SON">SON</option>
                                        <option value="DAUGHTER">DAUGHTER</option>
                                        <option value="HUSBAND">HUSBAND</option>
                                        <option value="WIFE">WIFE</option>
                                        <option value="FATHER">FATHER</option>
                                        <option value="MOTHER">MOTHER</option>
                                        <option value="FATHER-IN-LAW">FATHER-IN-LAW</option>
                                        <option value="MOTHER-IN-LAW">MOTHER-IN-LAW</option>
                                        <option value="OTHER">OTHER</option>
                                        <option value="SIBLING">SIBLING</option>
                                    </select>
                                </div>
                                <div class="form-check">
                                    <label class="form-label pl-1" for="CustomerDOB">Gender</label>
                                    <br />
                                    <input style="margin-left: 5px;" class="form-check-input" type="radio"
                                        name="MemberGender3" id="MemberGender3" checked="checked" value="Male">
                                    <label style="margin-left: 30px;" for="inlineRadio1">Male</label>
                                    <input style="margin-left: 20px;" class="form-check-input" type="radio"
                                        name="MemberGender3" id="MemberGender3" value="Female">
                                    <label style="margin-left: 50px;" for="inlineRadio2">Female</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Enter Voucher Code </label>
                            <input type="text" autocomplete="off" id="vouchercode" class="form-control"
                                placeholder="Enter Voucher Code" required>
                        </div>
                        <div class="form-group" style="margin-left: 8px; display: none;" id="IEnableTCdiv">
                            <input type="checkbox" id="IsTCAccepted" />
                            <label class="form-check-label">I agree to the <a id="IdTnChref"
                                    href="https://live.healthassure.in/Products/files/trade-india-tnc-document.pdf"
                                    target="_blank">
                                    *Terms & conditions </a></label>
                        </div>
                        <button class="btn btn-primary btn4" data-dismiss="modal"> Back </button> <button
                            id="SubmitRegistrationbrn" type="submit" class="btn btn-success btn5">
                            Continue
                        </button>
                    </form>
                </div>
            </div>
        </div>
        <div id='otpapp' class='modal-dialog-centered' style="overflow: hidden;display:none;">
            <div class='container height-100 d-flex justify-content-center align-items-center'
                style="margin-bottom: 30px;">
                <div>
                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-xl-12 col-sm-12 " style="margin-top: 20px;">
                            <div class='card1 p-2 text-center pt-2'>
                                <div style="display: flex;">
                                    <h6> Please enter the one time password </h6>
                                    <span class="close"><a style="border: radius 0;margin: 0px 10px 0px 0px !important;"
                                            href="javascript:closebuyplanpopup()">&times;</a></span>

                                </div>
                                <div> <span> OTP sent to </span> <small id='emailidtext1'>demo</small> </div>
                                <div id='otp' class='mx-auto text-center'>
                                    <input class='m-2 text-center form-control rounded heightwidth1' type='number'
                                        id='otpinputid' maxlength='6' />
                                </div>
                                <span> Time Left: <small id='timer1'>00:00</small></span>
                                <span style='color: red;' id='message'></span>
                                <div class='mt-3'> <button id='VarifyOTPbutton' onclick="VarifyOTPbuttonClick()"
                                        class='btn btn-danger validate'>Validate</button>
                                </div>
                                <div class='mt-3 content d-flex justify-content-center align-items-center'>
                                    <span>Didn't
                                        get the code &nbsp </span> <a href='javascript:ResendSendOTP()'
                                        class='text-decoration-none ms-3'><small
                                            id='otptextFeild1'>Resend(1/3)</small></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class='modal-dialog modal-dialog-centered modal-lg' style='display: none;' id='Thankyouformdiv'>
            <div style='background-color:white;' class='modal-content'>
                <div class='modal-header'>
                    <h5 class='modal-title text-center' id='exampleModalLabel'> </h5>
                    <button type='button' class='close' onclick='closemodalcallback()'>
                        <span aria-hidden='true'>&times;</span>
                    </button>
                </div>
                <div class='modal-body'>
                    <div class='row'>
                        <div class='pt-5'>
                            <h3 class='text-center' style='font-size:23px;'> Thank you for choosing us. We assure
                                you to take care of Your Health. !!</h3>
                            <p class='text-center pt-2' id='callbackAmessageId1'><b>Please Log in with your
                                    credentials on our Portal or App and start using the benefits.</b></p>
                            <div class='col-md-8  text-center mx-auto'>
                                <button type='submit' style='background-color: green;' data-dismiss='modal' value='OK'
                                    class=' btn-class  pgreenbtn' onclick='closemodalcallback()'>
                                    Ok </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-2.2.0.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
        integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
        crossorigin="anonymous"></script>
    <script src="js/AccessCodeReg.min.js"></script>
    <script>
        var acc = document.getElementsByClassName("accordion");
        var i;
        var timerFName = 'timer1';
        var UserSelfRegistrationId = '';
        for (i = 0; i < acc.length; i++) {
            acc[i].addEventListener("click", function () {
                this.classList.toggle("active");
                var panel = this.nextElementSibling;
                if (panel.style.maxHeight) {
                    panel.style.maxHeight = null;
                } else {
                    panel.style.maxHeight = panel.scrollHeight + "px";
                }
            });
        }
        function closemodalcallback() {
            closebuyplanpopup();
        }
        function closebuyplanpopup() {
            parent.postMessage("closebuyplanpopup", "*");
        }
        function startTimer1() {
            var presentTime = document.getElementById(timerFName).innerHTML;
            var timeArray = presentTime.split(/[:]+/);
            var m = timeArray[0];
            var s = checkSecond1((timeArray[1] - 1));
            if (s == 59) { m = m - 1 }
            if (m < 0) { return }
            document.getElementById(timerFName).innerHTML = m + ":" + s;
            setTimeout(startTimer1, 1000);
        }
        function checkSecond1(sec) {
            if (sec < 10 && sec >= 0) { sec = "0" + sec }; // add zero in front of numbers < 10
            if (sec < 0) { sec = "59" };
            return sec;
        }
        var href = new URL(window.location.href);
        var IsVarifyEmailPhoneTNC = href.searchParams.get("IsVarifyEmailPhone");
        var IsEnableTncDeclaration = href.searchParams.get("IsEnableTncDeclaration");
        if (IsEnableTncDeclaration == "true") {
            $("#IEnableTCdiv").show();
            $("#SubmitRegistrationbrn").prop('disabled', true);
            $("#IdTnChref").text('Good Health Declaration');
            $("#IdTnChref").prop('href', "https://live.healthassure.in/Products/files/Good-health-Declaration.pdf");
        }
        var IsEnableMembersAddtion = href.searchParams.get("IsEnableMembersAddtion");
        if (IsEnableMembersAddtion == 'true') {
            $('#Membersdiv').show();
        }
        var PTitle = href.searchParams.get("PopupTitle")?.replace("%20", " ")?.replace("%20", " ");
        $('#IsTCAccepted').click(function (e) {
            if (this.checked) {
                $("#SubmitRegistrationbrn").prop('disabled', false);
            } else {
                $("#SubmitRegistrationbrn").prop('disabled', true);
            }
        });
        function GetRelations() {
            var Relations = [];
            var MemberName1 = $('#MemberName1').val();
            var MemberDOB1 = $('#MemberDOB1').val();
            var MemberName2 = $('#MemberName2').val();
            var MemberDOB2 = $('#MemberDOB2').val();
            var MemberName3 = $('#MemberName3').val();
            var MemberDOB3 = $('#MemberDOB3').val();
            var Member1Relative = $('#Relative1').val()
            var Member2Relative = $('#Relative2').val()
            var Member3Relative = $('#Relative3').val()
            if (MemberName1 != null && MemberName1 != '' && MemberDOB1 != null && MemberDOB1 != '') {
                Relations.push({ "Name": MemberName1, "DoB": MemberDOB1, "Gender": $('input[type="radio"][name="MemberGender1"]:checked').val(), "RelationName": Member1Relative });
            }
            if (MemberName2 != null && MemberName2 != '' && MemberDOB2 != null && MemberDOB2 != '') {
                Relations.push({ "Name": MemberName2, "DoB": MemberDOB2, "Gender": $('input[type="radio"][name="MemberGender2"]:checked').val(), "RelationName": Member2Relative });
            }
            if (MemberName3 != null && MemberName3 != '' && MemberDOB3 != null && MemberDOB3 != '') {
                Relations.push({ "Name": MemberName3, "DoB": MemberDOB3, "Gender": $('input[type="radio"][name="MemberGender3"]:checked').val(), "RelationName": Member3Relative });
            }
            return Relations;
        }
        function ResendSendOTP() {
            RequestForRegistration();
        }
        $("#RegistrationformId").submit(function (ev) {
            ev.preventDefault();
            RequestForRegistration();
        });
        function RequestForRegistration() {
            var relations = GetRelations();
            if (IsEnableMembersAddtion == 'true') {
                if (relations.length < 3) {
                    alert('Please fill up member details');
                    return;
                }
            }
            CreateUserWithAccessCode($('#vouchercode').val(), $('#firstname').val(), $('#lastname').val(), $('#Gender').val(), $('#mobileno').val(), $('#emailid').val(), $('#CustomerDob').val(), relations ,'LANDINGPAGEPLANPURCHASEVERIFYOTP').then(function (result) {
                UserSelfRegistrationId = result.results[0].userSelfRegistrationId;
                $('#RegistrationModaldiv').hide();
                $('#otpapp').show();
                $('#emailidtext1').html($('#emailid').val() + ' & ' + $('#mobileno').val());
                $('#' + timerFName).html('00:00');
                var leftover = result.results[0].otpExpiryTime;
                var minutes = Math.floor(leftover / 60);
                leftover = leftover - (minutes * 60);
                $('#' + timerFName).html(minutes + ':' + leftover);
                startTimer1();
                $('#otptextFeild1').html(' Resend OTP');
            }).catch(function (err) {
                alert(err.message)
                console.warn(err);
            });
        }
        function VarifyOTPbuttonClick() {
            var otp = $('#otpinputid').val();
            AccessCodeConfirmation(otp, UserSelfRegistrationId);
        }
        function AccessCodeConfirmation(otp, RegistrationId) {
            LogInWithAccessCodeConfirmation(otp, RegistrationId).then(function (res) {
                EmptyFields();
                $('#VarifyOTPbutton').html('Verified');
                $('#message').html('');
                $('#otpapp').hide();
                $('#Thankyouformdiv').show();
            }).catch(function (err) {
                $('#message').html(err.message);
            });
        }
        function EmptyFields() {
            $('#vouchercode').val('');
            $('#firstname').val('');
            $('#lastname').val('');
            $('#Gender').val('');
            $('#mobileno').val('');
            $('#emailid').val('');
            $('#Relative').val('');
            $('#MemberName1').val('');
            $('#MemberDOB1').val('');
            $('#MemberName2').val('');
            $('#MemberDOB2').val('');
            $('#MemberName3').val('');
            $('#MemberDOB3').val('');
            $('#Relative1').val('');
            $('#Relative2').val('');
            $('#Relative3').val('');
            $("#IsTCAccepted").removeAttr("checked");
        }
    </script>
</body>

</html>