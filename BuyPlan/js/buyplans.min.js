async function BuyOPDPlan(e,a,r,t,o,n,i,s,c,d,l,u,p,P,g,y,m,O,f){var h="",C="";try{var A=getCurrentOS();if("Windows"==A||"Mac OS"==A||"Linux"==A)getLocation().then(e=>{h=e.coords.latitude,C=e.coords.longitude});else{var R=await getLocation();h=R.coords.latitude,C=R.coords.longitude}}catch(D){console.log(D.message)}return new Promise(function(A,R){AddLogRocket(a,{PlanCode:n,MobileNo:r,Description:c});var D="https://live.healthassure.in/ProductApi/",L={Accept:"application/json","Content-Type":"application/json",PartnerOPDPlanApiKey:"14UGczJo0lYOe5ilSzlT2cvLTj1lymz2lRWaBCwIQMd=pnIKeTDBAYApRXj6xO"};$.ajax({type:"POST",url:D+"api/OPDPlans/OPDPlansPurchase",data:JSON.stringify({Name:e,Email:a,MobileNo:r,DOB:t,Gender:o,PlanCode:n,PartnerOrderId:i,CouponCode:s,Status:"BuyRequest",utmSource:d,utmMedium:l,utmCampaign:u,utmTerm:p,utmContent:P,Relations:g,Agent:y,UserPurchaseLatitude:String(h),UserPurchaseLongitude:String(C),ClientIP:m,GHDTNCAccepted:O,TNCAccepted:f}),dataType:"json",headers:L,success:function(t){if(AddLogRocket(a,{PlanCode:n,log:"Paymant initiated"}),t.status){var o={key:t.results.razorpayOrder.key,amount:t.results.transaction.amountIncludingGST,currency:t.results.razorpayOrder.currency,name:"HealthAssure",description:c,image:D+"image/logo/halogo.png",order_id:t.results.razorpayOrder.id,handler:function(e){AddLogRocket(a,{PlanCode:n,log:"Paymant Success"});try{ShowLoding(!0)}catch{}$.ajax({type:"POST",url:D+"api/OPDPlans/OPDPlansPurchaseConformation",data:JSON.stringify({TransactionId:t.results.razorpayOrder.receipt,Message:"Payment Success",OrderId:t.results.razorpayOrder.id,Signature:e.razorpay_signature,RefId:e.razorpay_payment_id,Status:"Success"}),dataType:"json",headers:L,success:function(e){if(e.status){AddLogRocket(a,{PlanCode:n,log:"plan purchased"}),A(e);try{ShowLoding(!1),opningPaymentSuccesspage(n,t.results.razorpayOrder.receipt)}catch{}}else AddLogRocket(a,{PlanCode:n,log:"api=> api/OPDPlans/BuyOPDPlanConformationWithRazorpay, Error ",result:e}),console.warn(e),R("Error from Buy OPD Plan Conformation")},error:function(e){AddLogRocket(a,{PlanCode:n,log:"api=> api/OPDPlans/BuyOPDPlanConformationWithRazorpay, calling Error ",TransactionId:t.results.razorpayOrder.receipt}),console.warn(e),R(e)}})},prefill:{name:e,email:a,contact:"91"+r},notes:{transactionId:t.results.razorpayOrder.receipt,address:"Registered Office : 1st Floor, Excom House, North Wing, 7 Saki-vihar Road, Sakinaka, Andheri(E), Mumbai-400 072"},theme:{color:"#3399cc"},modal:{ondismiss:function(){try{AddLogRocket(a,{PlanCode:n,log:"ondismiss => userClosePaymentPopup"}),userClosePaymentPopup()}catch{}}}},i=new Razorpay(o);i.on("payment.failed",function(e){AddLogRocket(a,{PlanCode:n,TransactionId:t.results.razorpayOrder.receipt,log:"payment.failed, Error ",result:e}),console.warn(e.error)}),i.open();try{opningPaymentpage()}catch{}}else AddLogRocket(a,{PlanCode:n,log:"api=> api/OPDPlans/BuyOPDPlanWithRazorpay, Error ",result:t}),console.warn(t),R("Error Creating transaction Id from HealthAssure side")},error:function(e){AddLogRocket(a,{PlanCode:n,log:"api=> api/OPDPlans/BuyOPDPlanWithRazorpay, Calling Error "}),console.warn(e),R(e)}})})}function AddLogRocket(e,a){try{LogRocket.identify(e,a),LogRocket.log(e,a)}catch{}}async function getLocation(){return new Promise((e,a)=>{navigator.geolocation.getCurrentPosition(a=>e(a),e=>a(e))})}function getCurrentOS(){try{var e=window.navigator.userAgent,a=window.navigator?.userAgentData?.platform??window.navigator.platform,r=null;return -1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(a)?r="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(a)?r="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(a)?r="Windows":/Android/.test(e)?r="Android":!r&&/Linux/.test(a)&&(r="Linux"),r}catch(t){return null}}!function(){var e=document.createElement("script"),a=document.getElementsByTagName("script")[0];e.async=!0,e.src="https://checkout.razorpay.com/v1/checkout.js",e.charset="UTF-8",e.setAttribute("crossorigin","*"),a.parentNode.insertBefore(e,a)}();