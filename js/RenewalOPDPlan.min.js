!function(){var a=document.createElement("script"),b=document.getElementsByTagName("script")[0];a.async=!0,a.src="https://checkout.razorpay.com/v1/checkout.js",a.charset="UTF-8",a.setAttribute("crossorigin","*"),b.parentNode.insertBefore(a,b)}(),$("<style type='text/css'>.preloader1 { top:0; bottom:0; left:0; right:0; position:absolute; margin:auto; width: 100px; height: 100px; border-radius: 100%; border: 4px solid white; border-top: 4px solid #0f5fc2; order-right: 4px solid #0f5fc2; border-bottom: 4px solid #0f5fc2; -webkit-animation: spin 1s linear infinite; animation: spin 1s linear infinite;}@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); }}@-webkit-keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style>").appendTo("head"),$("body").append("<div style=' background-color: rgba(0, 0, 0, 0.5);'>        <style>            .modal-body {                padding: 2px 16px;            }            .modal-content1 {                position: absolute;                background-color: rgba(0, 0, 0, 0.5);                margin: auto;                padding: 0;                border: 0px solid #888;                width: 100%;                height: 100%;                box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);                animation-name: animatetop;                animation-duration: 0.4s            }            @keyframes animatetop {                from {                    top: -300px;                    opacity: 0                }                to {                    top: 0;                    opacity: 1                }            }            .card {                width: 430px;                border: none;                height: 330px;                box-shadow: 0px 5px 20px 0px #6F1667;                z-index: 1;                display: flex;                justify-content: center;                align-items: center            }            .card h6 {                color: #6F1667;                font-size: 20px            }            .inputs input {                width: 40px;                height: 40px            }            input[type=number]::-webkit-inner-spin-button,            input[type=number]::-webkit-outer-spin-button {                -webkit-appearance: none;                -moz-appearance: none;                appearance: none;                margin: 0            }.heightwidth1{   padding: 0px;}            .form-control:focus {                box-shadow: none;                border: 2px solid #808080            }            .validate {                border-radius: 20px;                height: 40px;                background-color: green;                border: 1px solid green;                width: 100%            }            .content a {                color: #D64F4F;                transition: all 0.5s            }            .content a:hover {                color: #6F1667            }        </style>        <div id='callbackpopup' class='modal'>            <div class='modal-content1'>               <div id='otpapp' class='modal-dialog-centered'>                      <div class='container height-100 d-flex justify-content-center align-items-center'>                        <div class='position-relative'>                            <div class='card p-2 text-center'>                                <h6>  Please enter the one time password  <span class='px-4 ml-3' onclick='closemodalcallback()'><i class='fa  fa-times' aria-hidden='true'></i></span> <br> </h6>                                <div> <span> sent to +91******</span> <small id='mobilenotext1'>4343</small> </div>                                <div id='otp' class='inputs d-flex flex-row justify-content-center mt-2'> <input                                        class='m-2 text-center form-control rounded heightwidth1' type='text' id='input1'                                        v-on:keyup='inputenter(1)' maxlength='1' />                                    <input class='m-2 text-center form-control rounded heightwidth1' v-on:keyup='inputenter(2)'                                        type='text' id='input2' maxlength='1' />                                    <input class='m-2 text-center form-control rounded heightwidth1' v-on:keyup='inputenter(3)'                                        type='text' id='input3' maxlength='1' />                                    <input class='m-2 text-center form-control rounded heightwidth1' v-on:keyup='inputenter(4)'                                        type='text' id='input4' maxlength='1' />                                    <input class='m-2 text-center form-control rounded heightwidth1' v-on:keyup='inputenter(5)'                                        type='text' id='input5' maxlength='1' />                                    <input class='m-2 text-center form-control rounded heightwidth1' v-on:keyup='inputenter(6)'                                        type='text' id='input6' maxlength='1' />                                </div>                                <span> Time Left: <small id='timer1'>00:00</small></span>                                <span style='color: red;' id='message'></span>                                <div class='mt-4'> <button id='VarifyOTPbtn'                                        class='btn btn-danger px-4 validate'>Validate</button>                                </div>                                <div class='mt-3 content d-flex justify-content-center align-items-center'> <span>Didn't                                        get the                                        code &nbsp</span> <a href='javascript:OpenOTPPopup()'                                        class='text-decoration-none ms-3'><small                                            id='otptextFeild1'>Resend(1/3)</small></a>                                </div>                            </div>                        </div>                    </div>                   </div></div> <div class='modal-dialog modal-dialog-centered modal-lg' style='display: none;' id='Thankyouformdiv'>                    <div style='background-color:white;' class='modal-content'>                        <div class='modal-header'>                            <h5 class='modal-title text-center' id='exampleModalLabel'> </h5>                            <button type='button' class='close' onclick='closemodalcallback()'>                                <span aria-hidden='true'>&times;</span>                            </button>                        </div>                        <div class='modal-body'>                            <div class='row'>                                <div class='pt-5'>                                    <h3 class='text-center' style='font-size:23px;'> Thank you for choosing us. We assure you to take care of Your Health. !!</h3>                                    <p class='text-center pt-2' id='callbackAmessageId1'><b>Please Log in with your credentials on our Portal or App and start using the benefits.</b></p>                                    <div class='col-md-8  text-center mx-auto'>                                        <button type='submit' style='background-color: green;' data-dismiss='modal' value='OK'                                            class=' btn-class  pgreenbtn' onclick='closemodalcallback()' >                                            Ok </button>                                    </div>                                </div>                            </div>                        </div>                    </div>                </div></div> </div></div> <div style='display: none;' id='Lodingdivid' class='preloader1'></div>");try{var b=new Vue({el:"#otpapp",methods:{inputenter(c){let b=document.querySelectorAll("#otp > *[id]");for(let a=0;a<b.length;a++)b[a].addEventListener("keydown",function(c){if("Backspace"===c.key)b[a].value="",0!==a&&b[a-1].focus();else{if(a===b.length-1&&""!==b[a].value)return!0;c.keyCode>47&&c.keyCode<58?(b[a].value=c.key,a!==b.length-1&&b[a+1].focus(),c.preventDefault()):c.keyCode>64&&c.keyCode<91&&(b[a].value=String.fromCharCode(c.keyCode),a!==b.length-1&&b[a+1].focus(),c.preventDefault())}})}}})}catch(a){console.log(a)}function ShowLoding(a){a?($("#otpapp").hide(),$("#Thankyouformdiv").hide(),$("#Lodingdivid").show(),openmodalcallback()):(closemodalcallback(),$("#Lodingdivid").hide())}function openmodalcallback(){document.getElementById("callbackpopup").style.display="block"}function closemodalcallback(){document.getElementById("callbackpopup").style.display="none"}function startTimer(){var b=document.getElementById(timerFName).innerHTML.split(/[:]+/),a=b[0],c=checkSecond(b[1]-1);59==c&&(a-=1),a<0||(document.getElementById(timerFName).innerHTML=a+":"+c,setTimeout(startTimer,1e3))}function checkSecond(a){return a<10&&a>=0&&(a="0"+a),a<0&&(a="59"),a}var ProductApiBaseUrl="https://live.healthassure.in/ProductApi/",RenewalOPDObj=null,timerFName="timer1";function RenewalOPDPlan(a,b,c,d,e){return new Promise(function(c,f){ShowLoding(!0),$.ajax({type:"POST",url:ProductApiBaseUrl+"api/OPDPlans/RenewalOPDPlanRequest",data:JSON.stringify({Username:a,PlanCode:b,CouponCode:d,PolicyNo:e,IsOTPVarification:!0}),dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json",ApiKey:"joxNjM0MjE2NDQ5fQ.nk2tgCC1NRAbaperiPWQXXoNgybL27zdN3T4dC5L-ak"},success:function(a){if(a.status){RenewalOPDObj=a,$("#otpapp").show(),ShowLoding(!1),openmodalcallback(),$("#mobilenotext1").html(a.results.user.mobileNo.slice(a.results.user.mobileNo.length-4)),$("#"+timerFName).html("00:00");var b=a.results.otpDetails.otpExpiryTime,d=Math.floor(b/60);b-=60*d,$("#"+timerFName).html(d+":"+b),startTimer(),$("#otptextFeild1").html(" Resend OTP"),c(a)}else alert(a.message),console.warn(a),f("Error Creating transaction Id from HealthAssure side")},error:function(a){console.warn(a),f(a)}})})}function RenewalOPDPlanRequest(a){RenewalOPDPlan("","","","",a)}function OpnOPDPaymentPopUp(a,b){return new Promise(function(f,d){var g={Accept:"application/json","Content-Type":"application/json",ApiKey:"joxNjM0MjE2NDQ5fQ.nk2tgCC1NRAbaperiPWQXXoNgybL27zdN3T4dC5L-ak"};if(a.status){var e={key:a.results.razorpayKey,amount:a.results.transaction.amountIncludingGST,currency:a.results.razorpayOrder.currency,name:"HealthAssure",description:a.results.user.planName,image:b+"image/logo/halogo.png",order_id:a.results.razorpayOrder.id,handler:function(c){try{ShowLoding(!0)}catch{}$.ajax({type:"POST",url:b+"api/OPDPlans/RenewalOPDPlanConformation",data:JSON.stringify({TransactionId:a.results.razorpayOrder.receipt,Message:"Payment Success",RefId:c.razorpay_payment_id,OrderId:a.results.razorpayOrder.id,Signature:c.razorpay_signature,Status:"Success"}),dataType:"json",headers:g,success:function(a){if(a.status){f(a);try{ShowLoding(!1)}catch{}}else console.warn(a),d("Error from Buy OPD Plan Conformation")},error:function(a){console.warn(a),d(a)}})},prefill:{name:a.results.user.name,email:a.results.user.emailId,contact:"91"+a.results.user.mobileNo},notes:{address:"Registered Office : 1st Floor, Excom House, North Wing, 7 Saki-vihar Road, Sakinaka, Andheri(E), Mumbai-400 072"},theme:{color:"#3399cc"},modal:{ondismiss:function(){try{ShowLoding(!1),userClosePaymentPopup()}catch{}}}},c=new Razorpay(e);c.on("payment.failed",function(a){console.warn(a.error)}),c.open()}else console.warn(a),d("Error Creating transaction Id from HealthAssure side")})}function userClosePaymentPopup(){closemodalcallback()}function VarifyOTPforValidation(a,b){return new Promise(function(c,d){$.ajax({type:"POST",url:ProductApiBaseUrl+"api/User/VerifyMobileNo",dataType:"json",data:JSON.stringify({MobileNumbar:b,OTP:a}),headers:{Accept:"application/json","Content-Type":"application/json",ApiKey:"joxNjM0MjE2NDQ5fQ.nk2tgCC1NRAbaperiPWQXXoNgybL27zdN3T4dC5L-ak"},success:function(a){console.warn(a.message),a.status?c(a):d(a)},error:function(a){console.warn(a),d(a)}})})}function GetOPDPlanForRenewal(a){return new Promise(function(b,c){ShowLoding(!0),$.ajax({type:"GET",url:ProductApiBaseUrl+"api/UserOPDPlans/GetOPDPlanForRenewal?policyNo="+a,dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json",ApiKey:"joxNjM0MjE2NDQ5fQ.nk2tgCC1NRAbaperiPWQXXoNgybL27zdN3T4dC5L-ak"},success:function(a){console.warn(a.message),ShowLoding(!1),a.status?b(a):c(a)},error:function(a){ShowLoding(!1),console.warn(a),c(a)}})})}$("#VarifyOTPbtn").click(function(){var b="";let c=document.querySelectorAll("#otp > *[id]");for(let a=0;a<c.length;a++)b+=c[a].value;VarifyOTPforValidation(b,RenewalOPDObj.results.user.mobileNo).then(function(a){$("#VarifyOTPbtn").html("Verified"),$("#message").html(""),OpnOPDPaymentPopUp(RenewalOPDObj,ProductApiBaseUrl).then(function(a){window.open("thankyou.html","_parent")}).catch(function(a){$("#message").html(a.message)}),$("#otpapp").hide()}).catch(function(a){$("#message").html(a.message)})})