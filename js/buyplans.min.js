!function () { var r = document.createElement("script"), a = document.getElementsByTagName("script")[0]; r.async = !0, r.src = "https://checkout.razorpay.com/v1/checkout.js", r.charset = "UTF-8", r.setAttribute("crossorigin", "*"), a.parentNode.insertBefore(r, a) }(); function BuyOPDPlan(r, a, e, t, n, o, s, i, c, u, d, l, p, y) { return new Promise(function (m, f) { var h = "https://live.healthassure.in/ProductApi/", g = { Accept: "application/json", "Content-Type": "application/json", ApiKey: "joxNjM0MjE2NDQ5fQ.nk2tgCC1NRAbaperiPWQXXoNgybL27zdN3T4dC5L-ak" }; $.ajax({ type: "POST", url: h + "api/OPDPlans/BuyOPDPlanWithRazorpay", data: JSON.stringify({ Name: r, Email: a, MobileNo: e, DOB: t, Gender: n, PlanCode: o, CouponCode: s, Status: "BuyRequest", utmSource: c, utmMedium: u, utmCampaign: d, utmTerm: l, utmContent: p, Relations: y }), dataType: "json", headers: g, success: function (t) { if ("HAOPDR003-60" == o) try { ShowLoding(!1), opningPaymentSuccesspage(); return } catch { } if (t.status) { var n = { key: t.results.razorpayKey, amount: t.results.transaction.amountIncludingGST, currency: t.results.razorpayOrder.currency, name: "HealthAssure", description: i, image: h + "image/logo/halogo.png", order_id: t.results.razorpayOrder.id, handler: function (r) { try { ShowLoding(!0) } catch { } $.ajax({ type: "POST", url: h + "api/OPDPlans/BuyOPDPlanConformationWithRazorpay", data: JSON.stringify({ TransactionId: t.results.razorpayOrder.receipt, Message: "Payment Success", OrderId: t.results.razorpayOrder.id, Signature: r.razorpay_signature, RefId: r.razorpay_payment_id, Status: "Success" }), dataType: "json", headers: g, success: function (r) { if (r.status) { m(r); try { ShowLoding(!1), opningPaymentSuccesspage() } catch { } } else console.warn(r), f("Error from Buy OPD Plan Conformation") }, error: function (r) { console.warn(r), f(r) } }) }, prefill: { name: r, email: a, contact: "91" + e }, notes: { address: "Registered Office : 1st Floor, Excom House, North Wing, 7 Saki-vihar Road, Sakinaka, Andheri(E), Mumbai-400 072" }, theme: { color: "#3399cc" }, modal: { ondismiss: function () { try { userClosePaymentPopup() } catch { } } } }, s = new Razorpay(n); s.on("payment.failed", function (r) { console.warn(r.error) }), s.open(); try { opningPaymentpage() } catch { } } else console.warn(t), f("Error Creating transaction Id from HealthAssure side") }, error: function (r) { console.warn(r), f(r) } }) }) }