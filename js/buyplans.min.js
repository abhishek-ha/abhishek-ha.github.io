!function(){var a=document.createElement("script"),e=document.getElementsByTagName("script")[0];a.async=!0,a.src="https://checkout.razorpay.com/v1/checkout.js",a.charset="UTF-8",a.setAttribute("crossorigin","*"),e.parentNode.insertBefore(a,e)}();var BaseUrl="https://live.healthassure.in/ProductApi/";async function BuyOPDPlan(a,e,r,t,o,n,i,s,c,d,l,u,p,g,y,P,f,m,C,O){var h="",A="";try{var R=getCurrentOS();if("Windows"==R||"Mac OS"==R||"Linux"==R)getLocation().then(a=>{h=a.coords.latitude,A=a.coords.longitude});else{var D=await getLocation();h=D.coords.latitude,A=D.coords.longitude}}catch(L){console.log(L.message)}return new Promise(function(R,D){AddLogRocket(e,{PlanCode:n,MobileNo:r,Description:s});var L={Accept:"application/json","Content-Type":"application/json",ApiKey:"joxNjM0MjE2NDQ5fQ.nk2tgCC1NRAbaperiPWQXXoNgybL27zdN3T4dC5L-ak"};$.ajax({type:"POST",url:BaseUrl+"api/OPDPlans/BuyOPDPlanWithRazorpay",data:JSON.stringify({Name:a,Email:e,MobileNo:r,DOB:t,Gender:o,PlanCode:n,CouponCode:i,Status:"BuyRequest",utmSource:c,utmMedium:d,utmCampaign:l,utmTerm:u,utmContent:p,Relations:g,Agent:y,UserPurchaseLatitude:String(h),UserPurchaseLongitude:String(A),ClientIP:P,GHDTNCAccepted:f,TNCAccepted:m,UserAddress:C,RiderCode:O}),dataType:"json",headers:L,success:function(t){try{if("HAOPDR003-60"==n)try{ShowLoding(!1),opningPaymentSuccesspage(null,null);return}catch{}if(AddLogRocket(e,{PlanCode:n,log:"Paymant initiated"}),t.status){var o={key:t.results.razorpayKey,amount:t.results.transaction.amountIncludingGST,currency:t.results.razorpayOrder.currency,name:"HealthAssure",description:s,image:BaseUrl+"image/logo/halogo.png",order_id:t.results.razorpayOrder.id,handler:function(a){AddLogRocket(e,{PlanCode:n,log:"Paymant Success"});try{ShowLoding(!0)}catch{}$.ajax({type:"POST",url:BaseUrl+"api/OPDPlans/BuyOPDPlanConformationWithRazorpay",data:JSON.stringify({TransactionId:t.results.razorpayOrder.receipt,Message:"Payment Success",OrderId:t.results.razorpayOrder.id,Signature:a.razorpay_signature,RefId:a.razorpay_payment_id,Status:"Success"}),dataType:"json",headers:L,success:function(a){if(a.status){AddLogRocket(e,{PlanCode:n,log:"plan purchased"}),R(a);try{ShowLoding(!1),opningPaymentSuccesspage(n,t.results.razorpayOrder.receipt)}catch{}}else AddLogRocket(e,{PlanCode:n,log:"api=> api/OPDPlans/BuyOPDPlanConformationWithRazorpay, Error ",result:a}),console.warn(a),D("Error from Buy OPD Plan Conformation")},error:function(a){AddLogRocket(e,{PlanCode:n,log:"api=> api/OPDPlans/BuyOPDPlanConformationWithRazorpay, calling Error ",TransactionId:t.results.razorpayOrder.receipt}),console.warn(a),D(a)}})},prefill:{name:a,email:e,contact:"91"+r},notes:{transactionId:t.results.razorpayOrder.receipt,address:"Registered Office : 1st Floor, Excom House, North Wing, 7 Saki-vihar Road, Sakinaka, Andheri(E), Mumbai-400 072"},theme:{color:"#3399cc"},modal:{ondismiss:function(){try{userClosePaymentPopup(),AddLogRocket(e,{PlanCode:n,log:"ondismiss => userClosePaymentPopup"})}catch{}}}},i=new Razorpay(o);i.on("payment.failed",function(a){AddLogRocket(e,{PlanCode:n,TransactionId:t.results.razorpayOrder.receipt,log:"payment.failed, Error ",result:a}),console.warn(a.error)}),i.open();try{opningPaymentpage()}catch{}}else AddLogRocket(e,{PlanCode:n,log:"api=> api/OPDPlans/BuyOPDPlanWithRazorpay, Error ",result:t}),console.warn(t),D("Error Creating transaction Id from HealthAssure side")}catch(c){AddLogRocket(e,{PlanCode:n,log:"api=> api/OPDPlans/BuyOPDPlanWithRazorpay, Calling Error "}),console.log(c)}},error:function(a){AddLogRocket(e,{PlanCode:n,log:"api=> api/OPDPlans/BuyOPDPlanWithRazorpay, Calling Error "}),console.warn(a),D(a)}})})}function GetOPDRiderBenefits(a){return new Promise(function(e,r){ShowLoding(!0),$.ajax({type:"GET",url:BaseUrl+"api/OPDPlans/GetOPDRiderBenefits?RiderCode="+a,dataType:"json",headers:{Accept:"application/json","Content-Type":"application/json",ApiKey:"joxNjM0MjE2NDQ5fQ.nk2tgCC1NRAbaperiPWQXXoNgybL27zdN3T4dC5L-ak"},success:function(a){console.warn(a.message),ShowLoding(!1),a.status?e(a):r(a)},error:function(a){ShowLoding(!1),console.warn(a),r(a)}})})}function AddLogRocket(a,e){try{LogRocket.identify(a,e),LogRocket.log(a,e)}catch{}}async function getLocation(){return new Promise((a,e)=>{navigator.geolocation.getCurrentPosition(e=>a(e),a=>e(a))})}function getCurrentOS(){try{var a=window.navigator.userAgent,e=window.navigator?.userAgentData?.platform??window.navigator.platform,r=null;return -1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(e)?r="Mac OS":-1!==["iPhone","iPad","iPod"].indexOf(e)?r="iOS":-1!==["Win32","Win64","Windows","WinCE"].indexOf(e)?r="Windows":/Android/.test(a)?r="Android":!r&&/Linux/.test(e)&&(r="Linux"),r}catch(t){return null}}