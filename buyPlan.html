<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Rubik&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-471644001"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <script>
        !function (f, b, e, v, n, t, s) {
            if (f.fbq) return; n = f.fbq = function () {
                n.callMethod ?
                    n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
            n.queue = []; t = b.createElement(e); t.async = !0;
            t.src = v; s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window, document, 'script', 'https://connect.facebook.net/en_US/fbevents.js');
    </script>
    <style>
        body {
            background-color: transparent;
            color: #212121;
            font-family: 'Rubik', sans-serif !important;
            overflow-x: hidden !important;
        }

        html {
            overflow-x: hidden !important;
        }

        div {
            background-color: transparent;
        }

        .modal-header {
            padding: 0px 0px 0px 0px;
        }

        .close {
            color: #000000 !important;
            float: right;
            font-size: 30px;
            font-weight: bold;
            padding: 10px 0px 0px 0px;
        }

        .pb-4 {
            padding-bottom: 1.5rem;
        }

        .pb-5 {
            padding-bottom: 3rem;
        }

        .pt-1 {
            padding-top: 6px;
        }

        .pt-2 {
            padding-top: 16px;
        }


        .modelbuypopup {
            width: 70%;
            margin-top: 10%;
            margin-bottom: 20px;
            margin-left: 15%;
            margin-right: 15%;
            border-radius: 10px;
            box-sizing: border-box;
            background-color: #ffffff !important;
        }

        .model-medium {
            width: 40%;
            margin-top: 80px;
            margin-bottom: 30px;
            margin-left: 30%;
            margin-right: 30%;
            border-radius: 10px;
            box-sizing: border-box;
            background-color: #ffffff !important;
        }

        .thankyouss {
            width: 60%;
            margin-top: 80px;
            margin-bottom: 30px;
            margin-left: 20%;
            margin-right: 20%;
            border-radius: 10px;
            box-sizing: border-box;
            background-color: #ffffff !important;
        }

        .thankyouss h3 {
            font-size: 23px;
            font-weight: 600;
            padding-top: 50px;
        }

        .thankyouss p {
            font-size: 16px;
            font-weight: 500;
        }

        .iconcheck img {
            margin-top: -50px;
            width: 100px;
            text-align: center !important;
        }

        @media only screen and (max-width: 800px) {
            .model-medium {
                width: 92%;
                margin-left: 4%;
                margin-right: 4%;
                margin-top: 30px;
                margin-bottom: 30px;
                background-color: #ffffff !important;
                border-radius: 10px;
                box-sizing: border-box;
            }

            .thankyouss {
                width: 92%;
                margin-left: 4%;
                margin-right: 4%;
                margin-top: 30px;
                margin-bottom: 30px;
                background-color: #ffffff !important;
                border-radius: 10px;
                box-sizing: border-box;
            }

            .modelbuypopup {
                width: 92%;
                margin-left: 4%;
                margin-right: 4%;
                margin-top: 30px;
                margin-bottom: 30px;
                background-color: #ffffff !important;
                border-radius: 10px;
                box-sizing: border-box;
            }

            .h3,
            h3 {
                font-size: 24px !important;
            }
        }

        .h3,
        h3 {
            font-size: 28px;
        }

        .btn {
            display: inline-block;
            margin-bottom: 0;
            font-weight: 600 !important;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            -ms-touch-action: manipulation;
            touch-action: manipulation;
            cursor: pointer;
            background-image: none;
            border: 1px solid transparent;
            padding: 8px 40px !important;
            font-size: 16px;
            line-height: 1.42857143;
            border-radius: 0px;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .btn-success {
            background-color: #0a8943;
        }

        .form-control {
            display: block;
            width: 100%;
            height: calc(1.8em + 1rem + 2px);
            padding: 0.375rem 0.85rem;
            font-size: 17px;
            font-weight: 400;
            line-height: 1.5;
            color: #495057;
            background-color: #fff;
            background-clip: padding-box;
            border: 1px solid #ced4da;
            border-radius: 20px;
            transition: border-color .15s ease-in-out, box-shadow .15s ease-in-out;
        }

        .mt-6 {
            margin-top: 5.5rem;
        }

        .pl-1 {
            padding-left: 8px;
        }

        .head {
            font-size: 32px;
            color: #231f20;
            font-weight: 700;
        }

        #preload {
            margin-top: 17%;
            height: 150px;
            width: 150px;
            border-radius: 50%;
            border: 2px solid #e5e5e5;
            animation: 0.8s pre linear infinite;
        }

        @keyframes pre {
            0% {
                transform: rotate(0deg);
                border-top: 2px solid mediumseagreen;
            }

            100% {
                transform: rotate(360deg);
                border-top: 2px solid green;
            }
        }

        @media only screen and (max-width: 990px) {
            .mob1 {
                display: none !important;
            }
        }

        .card {
            width: 430px;
            border: none;
            height: 330px;
            box-shadow: 0px 5px 20px 0px #6F1667;
            z-index: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .card1 {
            width: 380px;
            border: none;
            height: 330px;
            box-shadow: 0px 5px 20px 0px #6F1667;
            background-color: white;
            z-index: 1;
            margin: auto;
        }

        .card1 h6 {
            color: #6F1667;
            font-size: 23px;
            font-weight: 600;
        }

        .card h6 {
            color: #6F1667;
            font-size: 27px;
        }

        .inputs input {
            width: 40px;
            height: 40px;
            float: left;
            border-radius: 5px;
            margin-left: 2px;
            margin-right: 2px;
        }

        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            margin: 0;
        }

        .heightwidth1 {
            padding: 0px;
        }

        .form-control:focus {
            box-shadow: none;
            border: 2px solid #808080;
        }

        .validate {
            border-radius: 20px;
            height: 40px;
            background-color: green;
            border: 1px solid green;
            width: 35%;
            align-content: center;
        }

        .content a {
            color: #D64F4F;
            transition: all 0.5s
        }

        .content a:hover {
            color: #6F1667;
        }

        @media only screen and (max-width:300px) {
            .otpboxspace {
                margin-left: 0%;
            }
        }

        @media only screen and (min-width:301px) {
            .otpboxspace {
                margin-left: 4%;
            }
        }

        @media only screen and (min-width:350px) {
            .otpboxspace {
                margin-left: 13%;
            }
        }

        @media only screen and (min-width:400px) {
            .otpboxspace {
                margin-left: 16%;
            }
        }

        @media only screen and (min-width: 501px) {
            .otpboxspace {
                margin-left: 14%;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row ">
            <div id="loadding" style="overflow: hidden;display: none;">
                <center>
                    <div id="preload"></div>
                </center>
            </div>
            <div id="congratulationsdiv" class="modelbuypopup mt-6 " style="background-color:#ffffff; display: none;">
                <div class="col-md-12 " style="background-color:#ffffff;border-radius:5px;  margin-bottom: 50px;">
                    <div class="iconcheck" style="text-align: center;"> <img src="images/greencheck.png"> </div>
                    <h3 class="head"
                        style="font-weight:600;padding-top: 15px; text-align:center; text-transform: uppercase;">
                        Congratulations </h3>
                    <!-- <h3 style="text-align:center;"> <span id="buyplanpopuptitle" style="font-size:30px;
    font-weight:600; text-align:center;">Modal Header </span> <span class="close"><a style="border: radius 0;"href="javascript:closeform()">&times;</a></span> </h3> -->
                    <p style="font-size: 16px; padding-top: 10px; text-align:center;"> You have successfully purchased
                        the Plan <span id="buyplanpopuptitle" style="font-weight:600;">Modal Header </span>. </p>
                    <p style="font-size: 16px; padding-top: 10px; text-align:center;"> You will soon receive the app
                        access credentials to unlock your plan and start benefiting from it. Please download
                        HealthAssure app from playstore or appstore to book tests, scans, doctor appointments and much
                        more, across India wherever you are.</p>
                    <p style="font-size: 16px; text-align:center;">Our Onboarding team and Doctor Coach will get in
                        touch with you soon to help you with a super smooth experience of our ecosystem.</p>
                    <p style="font-size: 16px; text-align:center;"> For any queries you can reach out to us on
                        <strong>+91-22-61676633 </strong> or write to us at <strong>support@healthassure.in </strong>
                    </p>
                    <p style="font-size: 16px; text-align:center;"> <strong><a href="https://healthassure.in/"
                                target="_blank" style="text-decoration: none;">www.healthassure.in </a> </strong></p>
                    <p style="font-size: 21px;text-align:center;"> Welcome to HealthAssure! </p>
                    <div class=" text-center" style="margin-bottom: 20px;">
                        <button class="btn btn-success btn-lg mr-2" onclick="closebuyplanpopup()"
                            style="margin-bottom: 30px;">Ok </button>
                        <!-- <button style="margin-top: 20px;margin-bottom: 20px;" class="btn btn-danger btn-lg ml-2"
                onclick="closebuyplanpopup()">Close</button> -->
                    </div>
                </div>
            </div>
            <div id="buyplanformdiv" class="col-lg-4 col-md-4 col-sm-4 model-medium">
                <div class="modal-header">
                    <div class="col-lg-12 col-md-12 col-sm-12">
                        <h3> <span id="buyplanpopuptitle1" style="font-size:25px;
    font-weight:500;"> Please enter your details... </span> <span></span> <span class="close"><a
                                    style="border: radius 0;" href="javascript:closeform()">&times;</a></span> </h3>
                    </div>
                </div>
                <form method="post" id="buyplanform" style="margin-top: 15px;margin-bottom: 15px;">
                    <div class="form-group">
                        <label class="form-label pl-1" for="CustomerName">Name</label>
                        <input type="text" id="CustomerName" class="form-control" placeholder="Name *"
                            title="Please Enter Character Only" pattern="[a-zA-Z ]*" required />
                    </div>
                    <div class="form-group">
                        <label class="form-label pl-1" for="CustomerEmail">Email</label>
                        <input type="email" class="form-control" id="CustomerEmail"
                            pattern="[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$" class="form-control"
                            title="Please Enter Valid Email ID" placeholder="Email *" required />
                        <div id="EmailerrortoolTip" class="toolTip"></div>
                    </div>
                    <div class="form-group">
                        <label class="form-label pl-1" for="CustomerPhone">Phone</label>
                        <input type="tel" name="CustomerPhone" maxlength="10" id="CustomerPhone"
                            pattern="[0123456789][0-9]{9}" title="Please Enter Ten digits Number" class="form-control"
                            placeholder="Phone *" required />
                    </div>
                    <div class="form-group">
                        <label class="form-label pl-1" for="CustomerDOB">DOB</label>
                        <input type="date" id="CustomerDOB" class="form-control" placeholder="DOB" min="1920-01-01" />
                    </div>
                    <div class="form-check" style="margin-top: 20px;">
                        <label class="form-label pl-1" for="CustomerDOB">Gender</label><br />
                        <input style="margin-left: 5px;" class="form-check-input" type="radio" name="CustomerGender"
                            id="inlineRadio1" checked="checked" value="Male">
                        <label class="form-check-label" for="inlineRadio1">Male</label>
                        <input style="margin-left: 20px;" class="form-check-input" type="radio" name="CustomerGender"
                            id="inlineRadio2" value="Female">
                        <label class="form-check-label" for="inlineRadio2">Female</label>
                    </div>
                    <div class="form-group">
                        <!--  <button style="margin-top: 15px;" id="Placeorder" class="btn btn-primary btn-block mb-2">Place
                        order</button> -->
                        <div class=" text-center" style="margin-top:20px;">
                            <button class="btn btn-success btn-lg mr-2 " id="Placeorder" style="margin-bottom: 30px;">
                                Place Order </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <div class="row thankyouss" id="Thankyoupopup" style="display:none;">
            <div class="col-lg-6 pl-1">
                <img src="images/call-center1.png" class="img-responsive mob1 " alt="call us" style="width:90%">
            </div>
            <div class="col-lg-6 col-md-12 col-sm-12 mx-auto ">
                <h3 class="text-center"> Thankyou for showing interest in HealthAssure Plans. </h3>
                <p class="text-center pt-2"> Our advisor will contact you shortly. </p>
                <div class="col-md-12   mx-auto text-center">
                    <button type="submit" data-dismiss="modal" onclick="closebuyplanpopup()" value="OK"
                        class=" btn btn-success btn-class  pgreenbtn" id="button"> Ok </button>
                    <br>
                    <br>
                </div>
            </div>
        </div>
        <div id='otpapp' class='modal-dialog-centered' style="overflow: hidden;display: none;">
            <div class='container height-100 d-flex justify-content-center align-items-center'>
                <div>
                    <div class="row">
                        <div class="col-md-12 col-lg-12 col-xl-12 col-sm-12 " style="margin-top: 30px;">
                            <div class='card1 p-2 text-center pt-2'>
                                <h6> Please enter the one time password <span class='px-4 ml-3'
                                        onclick='closebuyplanpopup()'><i class='fa fa-times'></i></span> </h6>
                                <div> <span> sent to </span> <small id='emailidtext1'>demo</small> </div>
                                <div class="row">
                                    <div class="col-md-12 col-lg-12 col-xl-12 col-sm-12">
                                        <div id='otp' class='inputs justify-content-center mt-2 otpboxspace'>
                                            <input class='m-2 text-center form-control rounded heightwidth1' type='text'
                                                id='input1' v-on:keyup='inputenter(1)' maxlength='1' />
                                            <input class='m-2 text-center form-control rounded heightwidth1'
                                                v-on:keyup='inputenter(2)' type='text' id='input2' maxlength='1' />
                                            <input class='m-2 text-center form-control rounded heightwidth1'
                                                v-on:keyup='inputenter(3)' type='text' id='input3' maxlength='1' />
                                            <input class='m-2 text-center form-control rounded heightwidth1'
                                                v-on:keyup='inputenter(4)' type='text' id='input4' maxlength='1' />
                                            <input class='m-2 text-center form-control rounded heightwidth1'
                                                v-on:keyup='inputenter(5)' type='text' id='input5' maxlength='1' />
                                            <input class='m-2 text-center form-control rounded heightwidth1'
                                                v-on:keyup='inputenter(6)' type='text' id='input6' maxlength='1' />
                                        </div>
                                    </div>
                                </div>
                                <span> Time Left: <small id='timer1'>00:00</small></span>
                                <span style='color: red;' id='message'></span>
                                <div class='mt-4'> <button id='VarifyOTPbutton' onclick="VarifyOTPbuttonClick()"
                                        class='btn btn-danger validate'>Validate</button>
                                </div>
                                <div class='mt-3 content d-flex justify-content-center align-items-center'> <span>Didn't
                                        get the
                                        code &nbsp</span> <a href='javascript:SendOTPPopup($("#CustomerEmail").val())'
                                        class='text-decoration-none ms-3'><small
                                            id='otptextFeild1'>Resend(1/3)</small></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="js/buyplans.min.js"></script>
    <script>
        $('#congratulationsdiv').hide();
        $('#loadding').hide();
        function getUrlVars(url = window.location.href) {
            var vars = [], hash;
            var hashes = url.slice(url.indexOf('?') + 1).split('&');
            for (var i = 0; i < hashes.length; i++) {
                hash = hashes[i].split('=');
                vars.push(hash[0]);
                vars[hash[0]] = hash[1];
            }
            return vars;
        }
        var Vars = getUrlVars();
        var PTitle = Vars["PopupTitle"].replace("%20", " ").replace("%20", " ");
        $('#buyplanpopuptitle').html(PTitle);
        var CustomerPhone_val = null;
        var timerFName = 'timer1';
        //$('#buyplanpopuptitle1').html(PTitle);
        var IsVarifyEmail = Vars["IsVarifyEmail"];
        var EmailDomain = Vars["EmailDomain"];
        if (EmailDomain != null && EmailDomain != '') {
            $('#EmailerrortoolTip').html("your domain should be " + EmailDomain);
        }
        $('#buyplanform').submit(function (event) {
            event.preventDefault();
            if (!VarifyEmailDomain($('#CustomerEmail').val(), EmailDomain)) {
                return false;
            }
            $('#Placeorder').html('Processing...');
            var CustomerDOB = $('#CustomerDOB').val();
            if (CustomerDOB == null || CustomerDOB == '') {
                CustomerDOB = '2000-01-01';
            }
            CustomerPhone_val = $('#CustomerPhone').val();
            var UtmSource = Vars["utm_source"];
            if (Vars["utm_source"] == null || Vars["utm_source"] == "undefined") {
                UtmSource = PTitle;
            }
            if (IsVarifyEmail != null && IsVarifyEmail == "true") {
                SendOTPPopup($('#CustomerEmail').val());
            } else {
                BuyOPDPlan($('#CustomerName').val(), $('#CustomerEmail').val(), $('#CustomerPhone').val(), CustomerDOB, $('input[type="radio"][name="CustomerGender"]:checked').val(), Vars["PlanCode"], Vars["CouponCode"], PTitle, UtmSource, Vars["utm_medium"], Vars["utm_campaign"], Vars["utm_term"], Vars["utm_content"]).then(function (result) {
                    $('#CustomerName').val('');
                    $('#CustomerEmail').val('');
                    $('#CustomerPhone').val('');
                    $('#CustomerDOB').val('');
                    console.log("successful buy plan");
                    $('#Placeorder').html('Place order');
                }).catch(function (error) {
                    console.warn(error);
                    $('#Placeorder').html('Place order');
                });
            }
        });
        function closeform() {
            var phn = $('#CustomerPhone').val();
            if (phn == null || phn == '' || phn.length <= 9) {
                closebuyplanpopup();
            } else {
                var CustomerDOB = $('#CustomerDOB').val();
                if (CustomerDOB == null || CustomerDOB == '') {
                    CustomerDOB = '2000-01-01';
                }
                SubmitLeads($('#CustomerPhone').val(), $('#CustomerName').val(), $('#CustomerEmail').val(), CustomerDOB, PTitle).then(function (result) {
                    closebuyplanpopup();
                });
            }
        }

        function SubmitLeads(Phone, Name, Email, dob, Source) {
            return new Promise(function (resolve, reject) {
                var UtmSource = Vars["utm_source"];
                if (Vars["utm_source"] == null || Vars["utm_source"] == "undefined") {
                    UtmSource = Source;
                }
                let AdvisorObj = {
                    mobileNo: Phone, name: Name, dob: dob, email: Email, utmSource: UtmSource, utmMedium: Vars["utm_medium"], utmCampaign: Vars["utm_campaign"], utmTerm: Vars["utm_term"],
                    utmContent: Vars["utm_content"], status: "Fresh Lead", gender: $('input[type="radio"][name="CustomerGender"]:checked').val()
                };
                var replacer = function (key, value) {
                    if (value === undefined || value == "undefined") {
                        return null;
                    }
                    return value;
                };
                $.ajax({
                    type: "POST",
                    url: "https://live.healthassure.in/ProductApi/api/User/CallbackAdvisor",
                    data: JSON.stringify(AdvisorObj, replacer),
                    dataType: "json",
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    success: function (result) {
                        console.log(result.message);
                        resolve(result) // Resolve promise and go to then() 
                    },
                    error: function (eror) {
                        console.warn(eror);
                        reject(eror) // Reject the promise and go to catch()
                    }
                });
            });
        }

        function opningPaymentpage() {
            $('#buyplanformdiv').hide();
            $('#Placeorder').html('Place order');
        }
        function opningPaymentSuccesspage() {
            $('#congratulationsdiv').show();
            $('#buyplanformdiv').hide();
            console.log('opningPaymentSuccesspage');
            try {
                /*var IsUserTracker = Vars["IsUserTracker"];
                if (IsUserTracker) {
                    $('body').append('<iframe src="https://epromotion.in/healthassure" height="0" width="0" frameborder="0"></iframe>');
                }*/
                if (Vars["utm_source"].toLowerCase() == 'cuberoot') {
                    console.log(Vars["utm_source"]);
                    console.log(CustomerPhone_val);
                    $.ajax({
                        type: "GET",
                        url: "https://epromotion.in/healthassure/?phone=" + CustomerPhone_val,
                        dataType: "json",
                        success: function (result) {
                            console.warn(result);
                        },
                        error: function (eror) {
                            console.warn(eror);
                        }
                    });
                    console.log('*****************************cuberoot**********************');
                }
                try {
                    gtag('event', 'conversion', {
                        'send_to': 'AW-471644001/C4KFCL-H068DEOHu8uAB',
                        'value': 1999.0,
                        'currency': 'INR',
                        'transaction_id': ''
                    });
                } catch { console.log('error in https://www.googletagmanager.com/gtag'); }
            } catch { console.log('error'); }
        }
        function closebuyplanpopup() {
            parent.postMessage("closebuyplanpopup", "*");
        }
        function userClosePaymentPopup() {
            $('#congratulationsdiv').hide();
            $('#loadding').hide();
            $('#buyplanformdiv').hide();
            $('#Thankyoupopup').show();
            try {
                if (PTitle.toLowerCase().includes('startassure')) {
                    fbq('track', 'SubmitApplication');
                    console.log(' track SubmitApplication');
                }
            } catch { }
        }
        function ShowLoding(flag = true) {
            if (flag) {
                $('#loadding').show();
            } else {
                $('#loadding').hide();
            }
        }

        $(function () {
            var dtToday = new Date();

            var month = dtToday.getMonth() + 1;
            var day = dtToday.getDate();
            var year = dtToday.getFullYear();

            if (month < 10)
                month = '0' + month.toString();
            if (day < 10)
                day = '0' + day.toString();
            var maxDate = year + '-' + month + '-' + day;
            $('#CustomerDOB').attr('max', maxDate);
        });
        function VarifyEmailDomain(emailid, domain) {
            if (domain != null && domain != '') {
                if (emailid.toLowerCase().endsWith(domain.toLowerCase())) {
                    $('#EmailerrortoolTip').html("your domain should be " + domain);
                    $('#CustomerEmail').css('border-color', '#ced4da');
                    return true;
                } else {
                    $('#EmailerrortoolTip').html(' Invalid Email domain, please enter domain ' + domain);
                    $('#CustomerEmail').css('border-color', 'red');
                    $('#CustomerEmail').focus();
                    return false;
                }
            }
            return true;
        }
        function VarifyOTPbuttonClick() {
            var otp = '';
            const inputs = document.querySelectorAll('#otp > *[id]');
            for (let i = 0; i < inputs.length; i++) {
                otp = otp + inputs[i].value;
            }
            VarifyEmailOTPforValidation(otp, $('#CustomerEmail').val()).then(function (res) {
                $('#VarifyOTPbutton').html('Verified');
                $('#message').html('');
                $('#otpapp').hide();
                $('#Placeorder').html('Processing...');
                var CustomerDOB = $('#CustomerDOB').val();
                if (CustomerDOB == null || CustomerDOB == '') {
                    CustomerDOB = '2000-01-01';
                }
                CustomerPhone_val = $('#CustomerPhone').val();
                var UtmSource = Vars["utm_source"];
                if (Vars["utm_source"] == null || Vars["utm_source"] == "undefined") {
                    UtmSource = PTitle;
                }
                BuyOPDPlan($('#CustomerName').val(), $('#CustomerEmail').val(), $('#CustomerPhone').val(), CustomerDOB, $('input[type="radio"][name="CustomerGender"]:checked').val(), Vars["PlanCode"], Vars["CouponCode"], PTitle, UtmSource, Vars["utm_medium"], Vars["utm_campaign"], Vars["utm_term"], Vars["utm_content"]).then(function (result) {
                    $('#otpapp').hide();
                    $('#CustomerName').val('');
                    $('#CustomerEmail').val('');
                    $('#CustomerPhone').val('');
                    $('#CustomerDOB').val('');
                    $('#VarifyOTPbutton').html('Validate');
                    console.log("successful buy plan");
                    $('#Placeorder').html('Place order');
                }).catch(function (error) {
                    console.warn(error);
                    $('#Placeorder').html('Place order');
                });
            }).catch(function (err) {
                $('#message').html(err.message);
            });
        }
        function SendOTPPopup(Email) {
            $('#congratulationsdiv').hide();
            $('#buyplanformdiv').hide();
            $('#otpapp').show();
            $('#emailidtext1').html(Email);
            GetEmailOTPforValidation(Email).then(function (result) {
                $('#' + timerFName).html('00:00');
                var leftover = result.results.otpExpiryTime;
                var minutes = Math.floor(leftover / 60);
                leftover = leftover - (minutes * 60);
                $('#' + timerFName).html(minutes + ':' + leftover);
                startTimer1();
                $('#otptextFeild1').html(' Resend OTP');
            }).catch(function (error) {
                console.warn(error);
            });
        }
        try {
            var app = new Vue({
                el: '#otpapp',
                methods: {
                    inputenter(id) {
                        const inputs = document.querySelectorAll('#otp > *[id]');
                        for (let i = 0; i < inputs.length; i++) {
                            inputs[i].addEventListener('keydown', function (event) {
                                if (event.key === "Backspace") {
                                    inputs[i].value = '';
                                    if (i !== 0) inputs[i - 1].focus();
                                } else {
                                    if (i === inputs.length - 1 && inputs[i].value !== '') { return true; }
                                    else if (event.keyCode > 47 && event.keyCode < 58) {
                                        inputs[i].value = event.key;
                                        if (i !== inputs.length - 1) inputs[i + 1].focus(); event.preventDefault();
                                    }
                                    else if (event.keyCode > 64 && event.keyCode < 91) {
                                        inputs[i].value = String.fromCharCode(event.keyCode);
                                        if (i !== inputs.length - 1) inputs[i + 1].focus();
                                        event.preventDefault();
                                    }
                                }
                            });
                        }
                    }
                }
            });
        } catch (e) { console.log(e); }
        function startTimer1() {
            var presentTime = document.getElementById(timerFName).innerHTML;
            var timeArray = presentTime.split(/[:]+/);
            var m = timeArray[0];
            var s = checkSecond1((timeArray[1] - 1));
            if (s == 59) { m = m - 1 }
            if (m < 0) { return }
            document.getElementById(timerFName).innerHTML = m + ":" + s;
            setTimeout(startTimer1, 1000);
        }
        function checkSecond1(sec) {
            if (sec < 10 && sec >= 0) { sec = "0" + sec }; // add zero in front of numbers < 10
            if (sec < 0) { sec = "59" };
            return sec;
        }
        function GetEmailOTPforValidation(Email) {
            return new Promise(function (resolve, reject) {
                $.ajax({
                    type: "GET",
                    url: "https://live.healthassure.in/ProductApi/api/User/GetOTPForEmailId?Emailid=" + Email + "&Source=" + PTitle,
                    dataType: "json",
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json',
                        'ApiKey': 'joxNjM0MjE2NDQ5fQ.nk2tgCC1NRAbaperiPWQXXoNgybL27zdN3T4dC5L-ak'
                    },
                    success: function (result) {
                        console.warn(result.message);
                        if (result.status) {
                            resolve(result) // Resolve promise and go to then() 
                        } else {
                            reject(result) // Reject the promise and go to catch()
                        }
                    },
                    error: function (eror) {
                        console.warn(eror);
                        reject(err) // Reject the promise and go to catch()
                    }
                });
            });
        }
        function VarifyEmailOTPforValidation(otp, Email) {
            return new Promise(function (resolve, reject) {
                $.ajax({
                    type: "POST",
                    url: "https://live.healthassure.in/ProductApi/api/User/VerifyEmailId",
                    dataType: "json",
                    data: JSON.stringify({ EmailId: Email, OTP: otp }),
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json',
                        'ApiKey': 'joxNjM0MjE2NDQ5fQ.nk2tgCC1NRAbaperiPWQXXoNgybL27zdN3T4dC5L-ak'
                    },
                    success: function (result) {
                        console.warn(result.message);
                        if (result.status) {
                            resolve(result) // Resolve promise and go to then() 
                        } else {
                            reject(result) // Reject the promise and go to catch()
                        }
                    },
                    error: function (eror) {
                        console.warn(eror);
                        reject(err) // Reject the promise and go to catch()
                    }
                });
            });
        }
    </script>
</body>

</html>